!function(){function e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{OpKh:function(t,n,s){"use strict";s.r(n),s.d(n,"AuthenticationModule",(function(){return re}));var o,a,c,l=s("iInd"),u=s("SVse"),b=s("G0yt"),d=s("AytR"),f=function e(){i(this,e),this.baseUrl=d.a.base_url,this.admin_login=this.baseUrl+"/api/auth/signin",this.registration=this.baseUrl+"/api/auth/signup"},g=s("JIr8"),h=s("z6cu"),m=s("8Y7J"),p=s("IheW"),v=((o=function(){function e(t,r){i(this,e),this.http=t,this.endpoints=r}return r(e,[{key:"checkCredentials",value:function(e){return this.http.post(this.endpoints.admin_login,e).pipe(Object(g.a)(this.handleError))}},{key:"registration",value:function(e){return this.http.post(this.endpoints.registration,e).pipe(Object(g.a)(this.handleError))}},{key:"getAllCustomers",value:function(){}},{key:"handleError",value:function(e){return Object(h.a)(e)}}]),e}()).\u0275fac=function(e){return new(e||o)(m.ac(p.b),m.ac(f))},o.\u0275prov=m.Jb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),S=s("s7LF"),R=s("TSSN"),y=((a=function e(){i(this,e)}).\u0275mod=m.Lb({type:a}),a.\u0275inj=m.Kb({factory:function(e){return new(e||a)},imports:[[u.c,R.b]]}),a),w=s("XNiG"),k=s("pLZG"),A=function e(t){i(this,e),Object.assign(this,t)},C=function(e){return e[e.Success=0]="Success",e[e.Error=1]="Error",e[e.Info=2]="Info",e[e.Warning=3]="Warning",e}({}),I=((c=function(){function e(){i(this,e),this.subject=new w.a,this.defaultId="default-alert"}return r(e,[{key:"onAlert",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultId;return this.subject.asObservable().pipe(Object(k.a)((function(t){return t&&t.id===e})))}},{key:"success",value:function(e,t){this.alert(new A(Object.assign(Object.assign({},t),{type:C.Success,message:e})))}},{key:"error",value:function(e,t){this.alert(new A(Object.assign(Object.assign({},t),{type:C.Error,message:e})))}},{key:"info",value:function(e,t){this.alert(new A(Object.assign(Object.assign({},t),{type:C.Info,message:e})))}},{key:"warn",value:function(e,t){this.alert(new A(Object.assign(Object.assign({},t),{type:C.Warning,message:e})))}},{key:"alert",value:function(e){e.id=e.id||this.defaultId,this.subject.next(e)}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultId;this.subject.next(new A({id:e}))}}]),e}()).\u0275fac=function(e){return new(e||c)},c.\u0275prov=m.Jb({token:c,factory:c.\u0275fac,providedIn:"root"}),c),O=s("vHPH"),F=s("7g+E");function x(e,t){if(1&e){var r=m.Tb();m.Sb(0,"div"),m.Sb(1,"a",1),m.dc("click",(function(){m.vc(r);var e=t.$implicit;return m.fc().removeAlert(e)})),m.Fc(2,"\xd7"),m.Rb(),m.Ob(3,"p",2),m.gc(4,"translate"),m.Rb()}if(2&e){var i=t.$implicit,n=m.fc();m.Cb(n.cssClass(i)),m.Ab(3),m.lc("innerHTML",m.hc(4,4,i.message),m.wc)}}var q,N=((q=function(){function t(e,r,n){i(this,t),this.router=e,this.alertService=r,this.translate=n,this.id="default-alert",this.fade=!0,this.alerts=[],n.addLangs(["us","fr"]),n.setDefaultLang(localStorage.getItem("selected_lang"))}return r(t,[{key:"ngOnInit",value:function(){var e=this;this.alertSubscription=this.alertService.onAlert(this.id).subscribe((function(t){if(!t.message)return e.alerts=e.alerts.filter((function(e){return e.keepAfterRouteChange})),void e.alerts.forEach((function(e){return delete e.keepAfterRouteChange}));e.alerts.push(t),t.autoClose&&setTimeout((function(){return e.removeAlert(t)}),3e3)})),this.routeSubscription=this.router.events.subscribe((function(t){t instanceof l.b&&e.alertService.clear(e.id)}))}},{key:"ngOnDestroy",value:function(){this.alertSubscription.unsubscribe(),this.routeSubscription.unsubscribe()}},{key:"removeAlert",value:function(e){var t=this;this.alerts.includes(e)&&(this.fade?(this.alerts.find((function(t){return t===e})).fade=!0,setTimeout((function(){t.alerts=t.alerts.filter((function(t){return t!==e}))}),250)):this.alerts=this.alerts.filter((function(t){return t!==e})))}},{key:"cssClass",value:function(t){var r;if(t){var i=["alert","alert-dismissable"];return i.push((r={},e(r,C.Success,"alert alert-success"),e(r,C.Error,"alert alert-danger"),e(r,C.Info,"alert alert-info"),e(r,C.Warning,"alert alert-warning"),r)[t.type]),t.fade&&i.push("fade"),i.join(" ")}}}]),t}()).\u0275fac=function(e){return new(e||q)(m.Nb(l.c),m.Nb(I),m.Nb(R.d))},q.\u0275cmp=m.Hb({type:q,selectors:[["alert"]],inputs:{id:"id",fade:"fade"},decls:1,vars:1,consts:[[3,"class",4,"ngFor","ngForOf"],[1,"close",3,"click"],[2,"text-align","center",3,"innerHTML"]],template:function(e,t){1&e&&m.Dc(0,x,5,6,"div",0),2&e&&m.lc("ngForOf",t.alerts)},directives:[u.l],pipes:[R.c],encapsulation:2}),q);function _(e,t){1&e&&(m.Sb(0,"div"),m.Fc(1,"Username is required"),m.Rb())}function j(e,t){if(1&e&&(m.Sb(0,"div",25),m.Dc(1,_,2,0,"div",26),m.Rb()),2&e){var r=m.fc();m.Ab(1),m.lc("ngIf",r.fields.username.errors.required)}}function D(e,t){1&e&&(m.Sb(0,"div"),m.Fc(1,"Pass is required"),m.Rb())}function L(e,t){if(1&e&&(m.Sb(0,"div",25),m.Dc(1,D,2,0,"div",26),m.Rb()),2&e){var r=m.fc();m.Ab(1),m.lc("ngIf",r.fields.password.errors.required)}}var G,E=function(e){return{"d-none":e}},H=function(e){return{"is-invalid":e}},B=((G=function(){function e(t,r,n,s,o,a,c,l){i(this,e),this.getData=t,this.formBuilder=r,this.spinner=n,this.alertService=s,this.router=o,this.route=a,this.translate=c,this.loggerService=l,this.options={autoClose:!0,keepAfterRouteChange:!1},this.submitted=!1,this.loginform=!0,this.recoverform=!1,c.addLangs(["us","fr"]),c.setDefaultLang(localStorage.getItem("selected_lang"))}return r(e,[{key:"ngOnInit",value:function(){this.loginData=this.formBuilder.group({username:["",[S.o.required]],password:["",[S.o.required]]}),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"search-bus"}},{key:"ngAfterViewInit",value:function(){"true"===this.route.snapshot.queryParams.verified&&this.alertService.success("succ_email_verified",{autoClose:!0}),"false"===this.route.snapshot.queryParams.verified&&this.alertService.error("err_email_verify_expired",{autoClose:!0})}},{key:"showRecoverForm",value:function(){this.loginform=!this.loginform,this.recoverform=!this.recoverform}},{key:"showLoginForm",value:function(){this.loginform=!this.loginform,this.recoverform=!this.recoverform}},{key:"doLogin",value:function(){var e=this;this.spinner.show(),this.submitted=!0,this.loginData.invalid?this.spinner.hide():this.getData.checkCredentials(this.loginData.value).subscribe((function(t){"403"===t.code?(e.spinner.hide(),e.alertService.error("err_not_active",{autoClose:!0})):(e.spinner.hide(),e.loggerService.log("response",t),localStorage.setItem("user_token",t.accessToken),localStorage.setItem("user_id",t.id),localStorage.setItem("user_name",t.username),localStorage.setItem("user_username",t.username),e.router.navigate([e.returnUrl]))}),(function(t){e.spinner.hide(),e.loggerService.log("error",t.status),e.alertService.error(401===t.status?"err_invalid_cred":"err_common",{autoClose:!0})}))}},{key:"fields",get:function(){return this.loginData.controls}}]),e}()).\u0275fac=function(e){return new(e||G)(m.Nb(v),m.Nb(S.b),m.Nb(F.c),m.Nb(I),m.Nb(l.c),m.Nb(l.a),m.Nb(R.d),m.Nb(O.a))},G.\u0275cmp=m.Hb({type:G,selectors:[["app-login"]],decls:42,vars:27,consts:[[1,"auth-wrapper","d-flex","no-block","justify-content-center","align-items-center",2,"background","url(assets/images/background/bg-001.jpg) no-repeat","background-size","cover","background-position","center"],[1,"auth-box","on-sidebar",2,"max-width","500px !important"],["id","loginform",3,"ngClass"],[1,"logo"],[1,"font-medium","m-b-20","text-base","font-weight-bold"],["fade","true"],[1,"row"],[1,"col-12"],[1,"form-horizontal","m-t-20",3,"formGroup","ngSubmit"],[1,"input-group","mb-3"],[1,"input-group-prepend"],["id","basic-addon1",1,"input-group-text"],[1,"ti-user"],["type","text","formControlName","username","name","username","placeholder","Username",1,"form-control","form-control-lg",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["id","basic-addon2",1,"input-group-text"],[1,"ti-lock"],["type","password","formControlName","password","name","password",1,"form-control","form-control-lg",3,"placeholder","ngClass"],[1,"form-group","text-center"],[1,"col-xs-12","p-b-5"],["type","submit",1,"btn","btn-block","btn-md","btn-rounded","btn-default","text-white","font-weight-bold"],[1,"form-group","m-b-0","m-t-5"],[1,"col-sm-12","text-center"],["href","#/authentication/signup",1,"text-info","m-l-5"],["href","#/search-bus","type","button",1,"btn","btn-block","btn-md","btn-rounded","btn-danger","text-white","font-weight-bold"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(e,t){1&e&&(m.Sb(0,"div",0),m.Sb(1,"div",1),m.Sb(2,"div",2),m.Sb(3,"div",3),m.Sb(4,"h2",4),m.Fc(5),m.gc(6,"translate"),m.Rb(),m.Rb(),m.Ob(7,"alert",5),m.Sb(8,"div",6),m.Sb(9,"div",7),m.Sb(10,"form",8),m.dc("ngSubmit",(function(){return t.doLogin()})),m.Sb(11,"div",9),m.Sb(12,"div",10),m.Sb(13,"span",11),m.Ob(14,"i",12),m.Rb(),m.Rb(),m.Ob(15,"input",13),m.Rb(),m.Dc(16,j,2,1,"div",14),m.Sb(17,"div",9),m.Sb(18,"div",10),m.Sb(19,"span",15),m.Ob(20,"i",16),m.Rb(),m.Rb(),m.Ob(21,"input",17),m.gc(22,"translate"),m.Dc(23,L,2,1,"div",14),m.Rb(),m.Sb(24,"div",18),m.Sb(25,"div",19),m.Sb(26,"button",20),m.Fc(27),m.gc(28,"translate"),m.Rb(),m.Rb(),m.Rb(),m.Sb(29,"div",21),m.Sb(30,"div",22),m.Fc(31),m.gc(32,"translate"),m.Sb(33,"a",23),m.Sb(34,"b"),m.Fc(35),m.gc(36,"translate"),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Ob(37,"hr"),m.Sb(38,"div",18),m.Sb(39,"div",19),m.Sb(40,"a",24),m.Fc(41," Continue as Guest "),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb()),2&e&&(m.Ab(2),m.lc("ngClass",m.oc(21,E,t.recoverform)),m.Ab(3),m.Gc(m.hc(6,11,"welcome_login")),m.Ab(5),m.lc("formGroup",t.loginData),m.Ab(5),m.lc("ngClass",m.oc(23,H,t.submitted&&t.fields.username.errors)),m.Ab(1),m.lc("ngIf",t.submitted&&t.fields.username.errors),m.Ab(5),m.mc("placeholder",m.hc(22,13,"password")),m.lc("ngClass",m.oc(25,H,t.submitted&&t.fields.password.errors)),m.Ab(2),m.lc("ngIf",t.submitted&&t.fields.password.errors),m.Ab(4),m.Hc(" ",m.hc(28,15,"login")," "),m.Ab(4),m.Hc(" ",m.hc(32,17,"no_account")," "),m.Ab(4),m.Gc(m.hc(36,19,"signup")))},directives:[u.k,N,S.q,S.i,S.d,S.a,S.h,S.c,u.m],pipes:[R.c],encapsulation:2}),G),U=function e(){i(this,e)};function P(e,t){1&e&&(m.Sb(0,"div"),m.Fc(1,"Name is required"),m.Rb())}function T(e,t){if(1&e&&(m.Sb(0,"div",28),m.Dc(1,P,2,0,"div",29),m.Rb()),2&e){var r=m.fc();m.Ab(1),m.lc("ngIf",r.fields.name.errors.required)}}function J(e,t){1&e&&(m.Sb(0,"div"),m.Fc(1,"Email is required"),m.Rb())}function z(e,t){if(1&e&&(m.Sb(0,"div",28),m.Dc(1,J,2,0,"div",29),m.Rb()),2&e){var r=m.fc();m.Ab(1),m.lc("ngIf",r.fields.email.errors.required)}}function M(e,t){1&e&&(m.Sb(0,"div"),m.Fc(1,"Username is required"),m.Rb())}function V(e,t){if(1&e&&(m.Sb(0,"div",28),m.Dc(1,M,2,0,"div",29),m.Rb()),2&e){var r=m.fc();m.Ab(1),m.lc("ngIf",r.fields.username.errors.required)}}function W(e,t){1&e&&(m.Sb(0,"div"),m.Fc(1,"Valid Pass is Required"),m.Rb())}function K(e,t){if(1&e&&(m.Sb(0,"div",28),m.Dc(1,W,2,0,"div",29),m.Rb()),2&e){var r=m.fc();m.Ab(1),m.lc("ngIf",r.fields.password.errors.required)}}var Z,$,X=function(e){return{"d-none":e}},Y=function(e){return{"is-invalid":e}},Q=function(e){return{"d-block":e}},ee=[{path:"",children:[{path:"login",component:B},{path:"signup",component:(Z=function(){function e(t,r,n,s,o,a,c,l){i(this,e),this.apiManagerService=t,this.formBuilder=r,this.spinner=n,this.alertService=s,this.router=o,this.registrationRequestBody=a,this.translate=c,this.loggerService=l,this.options={autoClose:!0,keepAfterRouteChange:!1},this.submitted=!1,this.signupFormShow=!1,c.addLangs(["us","fr"]),c.setDefaultLang(localStorage.getItem("selected_lang"))}return r(e,[{key:"ngOnInit",value:function(){this.registerForm=this.formBuilder.group({name:["",S.o.required],username:["",S.o.required],email:["",S.o.required],password:["",S.o.required]})}},{key:"ngAfterViewInit",value:function(){}},{key:"doRegistration",value:function(){var e=this;if(this.spinner.show(),this.submitted=!0,this.registerForm.invalid)return this.spinner.hide(),void this.loggerService.log("registerForm",this.registerForm);this.registrationRequestBody=this.registerForm.getRawValue(),this.registrationRequestBody.role=["user"],console.log("registrationRequestBody",this.registrationRequestBody),this.apiManagerService.registration(this.registrationRequestBody).subscribe((function(t){e.spinner.hide(),e.loggerService.log("response",t),e.router.navigate(["authentication/login"])}),(function(t){e.spinner.hide(),e.loggerService.log("error",t),e.alertService.error(t.error.message,{autoClose:!0})}))}},{key:"fields",get:function(){return this.registerForm.controls}}]),e}(),Z.\u0275fac=function(e){return new(e||Z)(m.Nb(v),m.Nb(S.b),m.Nb(F.c),m.Nb(I),m.Nb(l.c),m.Nb(U),m.Nb(R.d),m.Nb(O.a))},Z.\u0275cmp=m.Hb({type:Z,selectors:[["app-signup"]],decls:54,vars:44,consts:[["fullScreen","false"],[2,"font-size","20px","color","white"],[1,"auth-wrapper","d-flex","no-block","justify-content-center","align-items-center"],[1,"auth-box",2,"max-width","500px"],["id","signupForm",3,"ngClass"],[1,"logo"],[1,"font-medium","m-b-20","text-base","font-weight-bold"],["fade","true"],[1,"row"],[1,"col-12"],[1,"form-horizontal","m-t-20",3,"formGroup","ngSubmit"],[1,""],["type","text","name","name","formControlName","name","placeholder","Name",1,"form-control","form-control-lg","text-base",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","email","formControlName","email","placeholder","Email*",1,"form-control","form-control-lg",3,"ngClass"],["type","text","formControlName","username","placeholder","Username*",1,"form-control","form-control-lg",3,"ngClass"],["type","password","formControlName","password",1,"form-control","form-control-lg",3,"placeholder","ngClass"],[1,"form-group","text-center"],[1,"col-xs-12"],["type","submit ",1,"btn","btn-block","btn-md","btn-rounded","btn-default","text-white","font-weight-bold"],[1,"form-group","m-b-0"],[1,"col-sm-12","text-center"],["href","#/authentication/login",1,"text-info","m-l-5"],["id","recoverform",3,"ngClass"],[1,"db"],["src","../../../../assets/images/logo.png","alt","logo",2,"max-width","40%"],[1,"font-medium","m-b-20","text-success"],["href","#/authentication/login"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(e,t){1&e&&(m.Sb(0,"ngx-spinner",0),m.Sb(1,"p",1),m.Fc(2,"Loading..."),m.Rb(),m.Rb(),m.Sb(3,"div",2),m.Sb(4,"div",3),m.Sb(5,"div",4),m.Sb(6,"div",5),m.Sb(7,"h2",6),m.Fc(8),m.gc(9,"translate"),m.Rb(),m.Rb(),m.Ob(10,"alert",7),m.Sb(11,"div",8),m.Sb(12,"div",9),m.Sb(13,"form",10),m.dc("ngSubmit",(function(){return t.doRegistration()})),m.Sb(14,"div",11),m.Ob(15,"input",12),m.Dc(16,T,2,1,"div",13),m.Rb(),m.Ob(17,"br"),m.Sb(18,"div",11),m.Ob(19,"input",14),m.Dc(20,z,2,1,"div",13),m.Rb(),m.Ob(21,"br"),m.Sb(22,"div",11),m.Ob(23,"input",15),m.Dc(24,V,2,1,"div",13),m.Rb(),m.Ob(25,"br"),m.Sb(26,"div",11),m.Ob(27,"input",16),m.gc(28,"translate"),m.Dc(29,K,2,1,"div",13),m.Rb(),m.Ob(30,"br"),m.Sb(31,"div",17),m.Sb(32,"div",18),m.Sb(33,"button",19),m.Fc(34),m.gc(35,"translate"),m.Rb(),m.Rb(),m.Rb(),m.Sb(36,"div",20),m.Sb(37,"div",21),m.Fc(38),m.gc(39,"translate"),m.Sb(40,"a",22),m.Sb(41,"b"),m.Fc(42),m.gc(43,"translate"),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Sb(44,"div",23),m.Sb(45,"div",5),m.Sb(46,"span",24),m.Ob(47,"img",25),m.Rb(),m.Sb(48,"h2",26),m.Fc(49),m.gc(50,"translate"),m.Rb(),m.Sb(51,"a",27),m.Fc(52),m.gc(53,"translate"),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb()),2&e&&(m.Ab(5),m.lc("ngClass",m.oc(32,X,t.signupFormShow)),m.Ab(3),m.Gc(m.hc(9,18,"welcome_signup")),m.Ab(5),m.lc("formGroup",t.registerForm),m.Ab(2),m.lc("ngClass",m.oc(34,Y,t.submitted&&t.fields.name.errors)),m.Ab(1),m.lc("ngIf",t.submitted&&t.fields.name.errors),m.Ab(3),m.lc("ngClass",m.oc(36,Y,t.submitted&&t.fields.email.errors)),m.Ab(1),m.lc("ngIf",t.submitted&&t.fields.email.errors),m.Ab(3),m.lc("ngClass",m.oc(38,Y,t.submitted&&t.fields.username.errors)),m.Ab(1),m.lc("ngIf",t.submitted&&t.fields.username.errors),m.Ab(3),m.nc("placeholder","",m.hc(28,20,"password"),"*"),m.lc("ngClass",m.oc(40,Y,t.submitted&&t.fields.password.errors)),m.Ab(2),m.lc("ngIf",t.submitted&&t.fields.password.errors),m.Ab(5),m.Hc(" ",m.hc(35,22,"signup")," "),m.Ab(4),m.Hc(" ",m.hc(39,24,"yes_account"),"? "),m.Ab(4),m.Gc(m.hc(43,26,"login")),m.Ab(2),m.lc("ngClass",m.oc(42,Q,t.signupFormShow)),m.Ab(5),m.Gc(m.hc(50,28,"congrats")),m.Ab(3),m.Gc(m.hc(53,30,"succ_signup_verification")))},directives:[F.a,u.k,N,S.q,S.i,S.d,S.a,S.h,S.c,u.m],pipes:[R.c],encapsulation:2}),Z)}]}],te=s("ZAI4"),re=(($=function e(){i(this,e)}).\u0275mod=m.Lb({type:$}),$.\u0275inj=m.Kb({factory:function(e){return new(e||$)},providers:[f,v,U],imports:[[u.c,l.f.forChild(ee),b.h,S.e,S.n,F.b,y,R.b.forRoot({loader:{provide:R.a,useFactory:te.b,deps:[p.b]}})]]}),$)}}])}();